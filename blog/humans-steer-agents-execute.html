<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Humans Steer, Agents Execute | The End of Human-Written Code</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fraunces:opsz,wght@9..144,300;9..144,600;9..144,800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.2/anime.min.js"></script>
    <style>
/* ==========================================
   DESIGN TOKENS
   ========================================== */
:root {
    --bg: #1c1917;
    --bg-deep: #0c0a09;
    --bg-card: rgba(41,37,36,0.6);
    --bg-card-solid: #292524;
    --surface-glass: rgba(28,25,23,0.65);
    --surface-glass-border: rgba(255,255,255,0.08);
    --border: rgba(63,59,56,0.7);
    --text: #fafaf9;
    --text-secondary: #d6d3d1;
    --text-muted: #a8a29e;
    --text-dim: #78716c;
    --orange: #6366f1;
    --orange-glow: rgba(99,102,241,0.15);
    --violet: #8b5cf6;
    --violet-glow: rgba(139,92,246,0.12);
    --indigo: #6366f1;
    --cyan: #06b6d4;
    --cyan-glow: rgba(6,182,212,0.12);
    --blue: #3b82f6;
    --emerald: #10b981;
    --emerald-glow: rgba(16,185,129,0.12);
    --gradient-orange: linear-gradient(135deg, #6366f1, #818cf8);
    --gradient-violet: linear-gradient(135deg, #8b5cf6, #a78bfa);
    --gradient-cyan: linear-gradient(135deg, #06b6d4, #22d3ee);
    --gradient-emerald: linear-gradient(135deg, #059669, #10b981);
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
    --shadow-md: 0 4px 16px rgba(0,0,0,0.4);
    --shadow-lg: 0 12px 40px rgba(0,0,0,0.5);
    --radius-sm: 8px;
    --radius-md: 14px;
    --radius-lg: 20px;
    --radius-xl: 28px;
}

/* ==========================================
   BASE
   ========================================== */
* { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; scroll-padding-top: 72px; }
body {
    font-family: 'Inter', system-ui, sans-serif;
    background: var(--bg-deep);
    color: var(--text);
    line-height: 1.75;
    overflow-x: hidden;
}
img { max-width: 100%; height: auto; display: block; }
a { color: var(--orange); text-decoration: none; }
a:hover { text-decoration: underline; }

/* ==========================================
   THREE.JS CANVAS
   ========================================== */
#three-bg {
    position: fixed; inset: 0;
    z-index: 0;
    pointer-events: none;
}

/* ==========================================
   CURSOR GLOW
   ========================================== */
.cursor-glow {
    position: fixed;
    width: 400px; height: 400px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(99,102,241,0.06) 0%, transparent 70%);
    pointer-events: none;
    z-index: 1;
    transform: translate(-50%, -50%);
    transition: opacity 0.3s;
    opacity: 0;
}
.cursor-glow.active { opacity: 1; }

/* ==========================================
   CONTENT LAYER
   ========================================== */
.content-layer { position: relative; z-index: 2; }

/* ==========================================
   LOADER
   ========================================== */
.loader {
    position: fixed; inset: 0; z-index: 10000;
    background: var(--bg-deep);
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    transition: opacity 0.8s cubic-bezier(0.76,0,0.24,1), visibility 0.8s;
}
.loader.done { opacity: 0; visibility: hidden; pointer-events: none; }
.loader-logo {
    font-family: 'Fraunces', serif;
    font-size: 1.4rem; font-weight: 800;
    color: var(--text);
    margin-bottom: 2rem;
    letter-spacing: -0.02em;
    display: flex; align-items: center; gap: 0.6rem;
    opacity: 0; animation: loaderFadeIn 0.6s ease 0.2s forwards;
}
.loader-mark {
    width: 32px; height: 32px; border-radius: 10px;
    background: var(--gradient-orange);
    display: flex; align-items: center; justify-content: center;
    color: white; font-family: 'JetBrains Mono', monospace;
    font-size: 0.75rem; font-weight: 500;
}
.loader-bar-wrap {
    width: 280px; height: 2px;
    background: rgba(255,255,255,0.06);
    border-radius: 2px; overflow: hidden;
    opacity: 0; animation: loaderFadeIn 0.6s ease 0.4s forwards;
}
.loader-bar {
    height: 100%; width: 0%;
    background: var(--gradient-orange);
    border-radius: 2px;
    transition: width 0.3s cubic-bezier(0.22,1,0.36,1);
}
.loader-pct {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem; color: var(--text-dim);
    margin-top: 1rem;
    opacity: 0; animation: loaderFadeIn 0.6s ease 0.5s forwards;
}
@keyframes loaderFadeIn { to { opacity: 1; } }

/* ==========================================
   SCROLL PROGRESS
   ========================================== */
.scroll-progress {
    position: fixed; top: 0; left: 0; height: 2px; z-index: 9999;
    background: var(--gradient-orange);
    width: 0%; pointer-events: none;
    box-shadow: 0 0 12px rgba(99,102,241,0.5);
}

/* ==========================================
   NAVIGATION
   ========================================== */
nav {
    position: fixed; top: -72px; left: 0; right: 0; z-index: 1000;
    background: rgba(12,10,9,0.6);
    backdrop-filter: blur(24px) saturate(1.5);
    -webkit-backdrop-filter: blur(24px) saturate(1.5);
    border-bottom: 1px solid var(--surface-glass-border);
    transition: top 0.5s cubic-bezier(0.22,1,0.36,1);
}
nav.visible { top: 0; }
.nav-inner {
    max-width: 1200px; margin: 0 auto;
    display: flex; align-items: center; justify-content: space-between;
    height: 64px; padding: 0 1.75rem;
}
.nav-logo {
    font-family: 'Fraunces', serif;
    font-weight: 800; font-size: 1rem;
    color: var(--text);
    display: flex; align-items: center; gap: 0.5rem;
    letter-spacing: -0.02em;
}
.nav-logo-mark {
    width: 28px; height: 28px; border-radius: 8px;
    background: var(--gradient-orange);
    display: flex; align-items: center; justify-content: center;
    color: white; font-family: 'JetBrains Mono', monospace;
    font-size: 0.65rem; font-weight: 500;
}
.nav-links { display: flex; align-items: center; gap: 0.15rem; list-style: none; }
.nav-links a {
    color: var(--text-dim); text-decoration: none;
    font-size: 0.8rem; font-weight: 500;
    padding: 0.4rem 0.7rem; border-radius: var(--radius-sm);
    transition: color 0.25s, background 0.25s;
    position: relative;
}
.nav-links a:hover { color: var(--text); background: rgba(255,255,255,0.05); }
.nav-links a.active { color: var(--orange); font-weight: 600; }
.nav-links a.active::after {
    content: ''; position: absolute; bottom: 2px; left: 50%; transform: translateX(-50%);
    width: 4px; height: 4px; border-radius: 50%; background: var(--orange);
}
.mobile-toggle {
    display: none; background: none; border: none;
    color: var(--text); font-size: 1.4rem; cursor: pointer; padding: 0.25rem;
}

/* ==========================================
   HERO
   ========================================== */
.hero {
    min-height: 100vh;
    display: flex; align-items: center;
    position: relative; overflow: hidden;
}
.hero-content {
    position: relative; z-index: 2;
    max-width: 1200px; margin: 0 auto;
    padding: 7rem 2rem 5rem;
    display: grid;
    grid-template-columns: 1.4fr 0.8fr;
    gap: 4rem; align-items: center;
}
.hero-left {
    position: relative;
    padding: 1.7rem 1.85rem 1.85rem;
    border: 1px solid rgba(255,255,255,0.09);
    border-radius: calc(var(--radius-lg) + 2px);
    background: linear-gradient(160deg, rgba(23,20,18,0.88), rgba(23,20,18,0.56));
    backdrop-filter: blur(10px) saturate(1.2);
    box-shadow: 0 22px 44px rgba(0,0,0,0.36);
}
.hero-eyebrow {
    display: inline-flex; align-items: center; gap: 0.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem; font-weight: 500;
    color: var(--orange);
    text-transform: uppercase; letter-spacing: 0.12em;
    margin-bottom: 1.5rem;
    opacity: 0; transform: translateY(20px);
}
.eyebrow-line { width: 28px; height: 2px; background: var(--gradient-orange); border-radius: 1px; }
.hero h1 {
    font-family: 'Fraunces', serif;
    font-size: clamp(2.4rem, 5vw, 3.8rem);
    font-weight: 800; line-height: 1.08;
    letter-spacing: -0.035em;
    margin-bottom: 1.5rem;
    opacity: 0; transform: translateY(30px);
}
.hero h1 em {
    font-style: normal;
    background: var(--gradient-orange);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    background-clip: text;
}
.hero-desc {
    font-size: 1.05rem; line-height: 1.75;
    color: var(--text-secondary);
    max-width: 520px;
    margin-bottom: 2rem;
    opacity: 0; transform: translateY(30px);
}
.hero-meta {
    display: flex; gap: 1.5rem; flex-wrap: wrap;
    padding-top: 1.25rem;
    border-top: 1px solid rgba(255,255,255,0.1);
    opacity: 0; transform: translateY(20px);
}
.hero-meta-item {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.68rem; color: var(--text-dim);
    display: flex; align-items: center; gap: 0.4rem;
}
.hero-meta-item span { color: var(--orange); font-weight: 600; }
.hero-character-wrap {
    display: flex; align-items: center; justify-content: center;
    position: relative; width: 290px; height: 290px;
    opacity: 0; transform: translateX(40px);
}
.hero-character {
    width: 256px; height: 256px;
    background: url('../images/shashank_blog_spritesheet.png') 0 0 no-repeat;
    background-size: 2048px 768px;
    image-rendering: auto;
    filter: drop-shadow(0 14px 26px rgba(0,0,0,0.56)) drop-shadow(0 0 28px rgba(99,102,241,0.14));
    opacity: 0.97;
    transform: translateZ(0);
}
.hero-character.stand { animation: sprite-stand 1.9s steps(8) infinite; }
.hero-character.book { animation: sprite-book 1.35s steps(8) infinite; }
.hero-character.read { animation: sprite-read 2.2s steps(8) infinite; }
@keyframes sprite-stand { from { background-position: 0 0; } to { background-position: -2048px 0; } }
@keyframes sprite-book { from { background-position: 0 -256px; } to { background-position: -2048px -256px; } }
@keyframes sprite-read { from { background-position: 0 -512px; } to { background-position: -2048px -512px; } }
.hero-character-glow {
    position: absolute; width: 276px; height: 276px; border-radius: 50%;
    background: radial-gradient(circle, rgba(99,102,241,0.14) 0%, rgba(14,165,233,0.1) 38%, transparent 72%);
    filter: blur(22px); z-index: -1;
    animation: pulseGlow 5s ease-in-out infinite;
}
@keyframes pulseGlow { 0%, 100% { transform: scale(1); opacity: 0.32; } 50% { transform: scale(1.06); opacity: 0.5; } }
.scroll-hint {
    position: absolute; bottom: 2.5rem; left: 50%; transform: translateX(-50%);
    display: flex; flex-direction: column; align-items: center; gap: 0.5rem;
    opacity: 0; animation: fadeInHint 1s ease 3s forwards;
}
.scroll-hint-text {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.6rem; color: var(--text-dim);
    text-transform: uppercase; letter-spacing: 0.15em;
}
.scroll-hint-line {
    width: 1px; height: 36px;
    background: linear-gradient(to bottom, var(--orange), transparent);
    animation: scrollPulse 2s ease-in-out infinite;
}
@keyframes fadeInHint { to { opacity: 1; } }
@keyframes scrollPulse { 0%, 100% { opacity: 0.2; transform: scaleY(0.5); } 50% { opacity: 1; transform: scaleY(1); } }

/* ==========================================
   BLOG SECTIONS
   ========================================== */
section { position: relative; isolation: isolate; }
section::before {
    content: ''; position: absolute; inset: 0;
    pointer-events: none; z-index: 0; opacity: 0.34;
    background: radial-gradient(65% 46% at 84% 0%, rgba(99,102,241,0.12), transparent 72%);
}
.section-wrap {
    position: relative; z-index: 1;
    max-width: 760px; margin: 0 auto;
    padding: 5rem 2rem;
}
.section-eyebrow {
    display: inline-flex; align-items: center; gap: 0.5rem;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.7rem; font-weight: 500;
    text-transform: uppercase; letter-spacing: 0.12em;
    color: var(--orange);
    margin-bottom: 1rem;
}
.section-title {
    font-family: 'Fraunces', serif;
    font-size: clamp(1.6rem, 3vw, 2.2rem);
    font-weight: 800; letter-spacing: -0.025em;
    line-height: 1.15; margin-bottom: 1.5rem;
    text-wrap: balance;
}

/* Blog prose */
.prose { font-size: 1.02rem; color: var(--text-secondary); line-height: 1.8; }
.prose p { margin-bottom: 1.5rem; }
.prose strong { color: var(--text); font-weight: 600; }
.prose em { color: var(--orange); font-style: normal; }
.prose h3 {
    font-family: 'Fraunces', serif;
    font-size: 1.3rem; font-weight: 800;
    color: var(--text); margin: 2.5rem 0 1rem;
    letter-spacing: -0.02em;
}
.prose ul, .prose ol {
    padding-left: 1.5rem; margin-bottom: 1.5rem;
}
.prose li { margin-bottom: 0.5rem; color: var(--text-secondary); }
.prose li::marker { color: var(--orange); }

/* Blockquote */
.prose blockquote {
    border-left: 3px solid var(--orange);
    padding: 1rem 1.5rem;
    margin: 2rem 0;
    background: rgba(99,102,241,0.04);
    border-radius: 0 var(--radius-md) var(--radius-md) 0;
    font-style: italic;
    color: var(--text-secondary);
}
.prose blockquote strong { color: var(--orange); }

/* Code blocks */
.prose code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.85em;
    background: rgba(255,255,255,0.06);
    padding: 0.15rem 0.4rem;
    border-radius: 4px;
    color: var(--orange);
}
.prose pre {
    background: rgba(12,10,9,0.8);
    border: 1px solid var(--border);
    border-radius: var(--radius-md);
    padding: 1.25rem 1.5rem;
    margin: 2rem 0;
    overflow-x: auto;
    backdrop-filter: blur(8px);
}
.prose pre code {
    background: none; padding: 0; color: var(--text-muted);
    font-size: 0.82rem; line-height: 1.6;
}

/* Tables */
.prose table {
    width: 100%; border-collapse: collapse;
    margin: 2rem 0;
    font-size: 0.88rem;
}
.prose th {
    text-align: left;
    padding: 0.75rem 1rem;
    border-bottom: 2px solid var(--orange);
    color: var(--orange);
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.72rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
}
.prose td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    color: var(--text-secondary);
}
.prose tr:hover td { background: rgba(255,255,255,0.02); }

/* Callout boxes */
.callout {
    background: var(--bg-card);
    backdrop-filter: blur(12px);
    border: 1px solid var(--border);
    border-radius: var(--radius-lg);
    padding: 1.75rem;
    margin: 2rem 0;
    transition: all 0.35s;
}
.callout:hover { border-color: rgba(99,102,241,0.3); box-shadow: 0 8px 30px rgba(0,0,0,0.3), 0 0 20px var(--orange-glow); }
.callout h4 {
    font-family: 'Fraunces', serif;
    font-size: 1rem; font-weight: 800;
    margin-bottom: 0.5rem;
    color: var(--orange);
}
.callout p { font-size: 0.88rem; color: var(--text-secondary); line-height: 1.6; margin: 0; }

/* Stat strip */
.stat-strip {
    display: grid; grid-template-columns: repeat(4, 1fr);
    gap: 1px; background: var(--border);
    border-radius: var(--radius-lg); overflow: hidden; margin: 2.5rem 0;
}
.stat-strip-item {
    background: var(--bg-card-solid); padding: 1.5rem 1rem;
    text-align: center; transition: background 0.3s;
}
.stat-strip-item:hover { background: #33302e; }
.stat-strip-val {
    font-family: 'Fraunces', serif;
    font-size: 1.6rem; font-weight: 800;
    color: var(--orange); line-height: 1; margin-bottom: 0.3rem;
}
.stat-strip-label { font-size: 0.68rem; color: var(--text-dim); font-weight: 500; }

/* Pull quote */
.pullquote {
    text-align: center; padding: 3rem 1.5rem; margin: 3rem 0; position: relative;
}
.pullquote::before, .pullquote::after {
    content: ''; position: absolute; left: 50%; transform: translateX(-50%);
    width: 48px; height: 2px; background: var(--gradient-orange); border-radius: 1px;
}
.pullquote::before { top: 0; }
.pullquote::after { bottom: 0; }
.pullquote blockquote {
    font-family: 'Fraunces', serif;
    font-size: clamp(1.1rem, 2vw, 1.4rem);
    font-weight: 300; font-style: italic;
    line-height: 1.55; color: var(--text-secondary);
    max-width: 600px; margin: 0 auto;
    border: none; background: none; padding: 0;
}
.pullquote blockquote strong { color: var(--orange); font-weight: 600; }

/* Comparison grid */
.vs-grid {
    display: grid; grid-template-columns: 1fr 48px 1fr;
    gap: 0; align-items: stretch; margin: 2rem 0;
}
.vs-card {
    border: 1px solid var(--border); border-radius: var(--radius-lg);
    padding: 1.75rem; background: var(--bg-card); backdrop-filter: blur(12px);
}
.vs-card.muted { opacity: 0.5; }
.vs-card.highlight {
    border-color: rgba(99,102,241,0.4);
    background: rgba(99,102,241,0.06);
    box-shadow: 0 0 60px rgba(99,102,241,0.1);
    opacity: 1;
}
.vs-badge {
    display: inline-block;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.62rem; font-weight: 500;
    text-transform: uppercase; letter-spacing: 0.1em;
    padding: 0.2rem 0.6rem; border-radius: 100px;
    margin-bottom: 0.75rem;
}
.vs-badge.old { background: var(--border); color: var(--text-dim); }
.vs-badge.new { background: var(--gradient-orange); color: white; }
.vs-card h3 { font-family: 'Fraunces', serif; font-size: 1.15rem; font-weight: 800; margin-bottom: 0.6rem; }
.vs-list { list-style: none; padding: 0; }
.vs-list li { padding: 0.4rem 0; font-size: 0.85rem; color: var(--text-secondary); display: flex; align-items: baseline; gap: 0.5rem; }
.vs-list li::before { content: ''; width: 5px; height: 5px; border-radius: 50%; flex-shrink: 0; }
.vs-card.muted .vs-list li::before { background: var(--text-dim); }
.vs-card.highlight .vs-list li::before { background: var(--orange); }
.vs-arrow { display: flex; align-items: center; justify-content: center; font-size: 1.5rem; color: var(--orange); }

/* Bento feature cards */
.bento { display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.75rem; margin: 2rem 0; }
.bento-card {
    background: var(--bg-card); backdrop-filter: blur(12px);
    border: 1px solid var(--border); border-radius: var(--radius-lg);
    padding: 1.5rem; transition: all 0.35s; position: relative; overflow: hidden;
}
.bento-card::before {
    content: ''; position: absolute; inset: 0;
    background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(99,102,241,0.06) 0%, transparent 60%);
    opacity: 0; transition: opacity 0.3s; pointer-events: none;
}
.bento-card:hover::before { opacity: 1; }
.bento-card:hover { border-color: rgba(99,102,241,0.3); box-shadow: 0 12px 36px rgba(0,0,0,0.4), 0 0 20px var(--orange-glow); transform: translateY(-3px); }
.bento-card h4 { font-size: 0.9rem; font-weight: 700; margin-bottom: 0.3rem; }
.bento-card p { font-size: 0.8rem; color: var(--text-dim); line-height: 1.5; }
.bento-icon {
    width: 36px; height: 36px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.1rem; margin-bottom: 0.75rem;
    background: var(--orange-glow);
}

/* CTA */
.cta-banner {
    background: rgba(99,102,241,0.04);
    border: 1px solid rgba(99,102,241,0.15);
    border-radius: var(--radius-xl);
    padding: 3rem; text-align: center; margin: 3rem 0;
    backdrop-filter: blur(12px);
}
.cta-banner h2 { font-family: 'Fraunces', serif; font-size: 1.6rem; font-weight: 800; margin-bottom: 0.5rem; }
.cta-banner p { font-size: 0.95rem; color: var(--text-secondary); margin-bottom: 1.5rem; }
.btn {
    display: inline-flex; align-items: center; gap: 0.5rem;
    padding: 0.7rem 1.4rem; border-radius: var(--radius-md);
    font-weight: 600; font-size: 0.85rem; text-decoration: none; cursor: pointer;
    border: none; font-family: inherit; transition: all 0.3s cubic-bezier(0.22,1,0.36,1);
}
.btn-primary { background: var(--gradient-orange); color: white; box-shadow: 0 4px 20px rgba(99,102,241,0.3); }
.btn-primary:hover { transform: translateY(-3px); box-shadow: 0 8px 30px rgba(99,102,241,0.4); text-decoration: none; }
.btn-outline { background: rgba(41,37,36,0.6); color: var(--text); border: 1.5px solid var(--border); }
.btn-outline:hover { border-color: var(--orange); color: var(--orange); text-decoration: none; transform: translateY(-3px); }

/* Footer */
footer {
    padding: 2.5rem 2rem; text-align: center;
    border-top: 1px solid var(--border);
    max-width: 760px; margin: 0 auto;
}
.footer-links { display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; margin-bottom: 1rem; }
.footer-links a { font-size: 0.78rem; color: var(--text-dim); text-decoration: none; font-weight: 500; }
.footer-links a:hover { color: var(--orange); }
.footer-copy { font-size: 0.72rem; color: var(--text-dim); }

/* ==========================================
   REVEAL SYSTEM
   ========================================== */
.reveal {
    opacity: 0; transform: translateY(40px) scale(0.98);
    transition: opacity 0.9s cubic-bezier(0.22,1,0.36,1), transform 0.9s cubic-bezier(0.22,1,0.36,1);
    will-change: transform, opacity;
}
.reveal.visible { opacity: 1; transform: translateY(0) scale(1); }
.reveal-delay-1 { transition-delay: 0.1s; }
.reveal-delay-2 { transition-delay: 0.2s; }

/* ==========================================
   FLOATING GUIDE
   ========================================== */
.guide {
    position: fixed; bottom: 2rem; right: 2rem; z-index: 900;
    display: flex; flex-direction: column; align-items: flex-end; gap: 0.5rem;
    pointer-events: none;
    opacity: 0; transform: translateY(20px) scale(0.8);
    transition: opacity 0.5s cubic-bezier(0.34,1.56,0.64,1), transform 0.5s cubic-bezier(0.34,1.56,0.64,1);
}
.guide.visible { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
.guide-bubble {
    background: rgba(12,10,9,0.7); backdrop-filter: blur(16px);
    border: 1px solid var(--surface-glass-border);
    border-radius: var(--radius-md);
    padding: 0.6rem 0.9rem; font-size: 0.72rem;
    color: var(--text-secondary); max-width: 210px;
    box-shadow: var(--shadow-lg);
    opacity: 0; transform: translateY(8px);
    transition: opacity 0.3s, transform 0.3s;
}
.guide-bubble.visible { opacity: 1; transform: translateY(0); }
.guide-avatar {
    width: 80px; height: 80px; border-radius: 50%; overflow: hidden;
    box-shadow: 0 10px 24px rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.1);
    background: radial-gradient(circle at 50% 58%, rgba(12,10,9,0.88) 0%, rgba(12,10,9,0.56) 68%, transparent 100%);
    cursor: pointer;
}
.guide-sprite {
    width: 80px; height: 80px;
    background: url('../images/shashank_blog_spritesheet.png') 0 0 no-repeat;
    background-size: 640px 240px;
    image-rendering: auto;
    filter: drop-shadow(0 4px 10px rgba(0,0,0,0.45));
}
.guide-sprite.stand { animation: guide-stand 1.9s steps(8) infinite; }
.guide-sprite.book { animation: guide-book 1.35s steps(8) infinite; }
.guide-sprite.read { animation: guide-read 2.2s steps(8) infinite; }
@keyframes guide-stand { from { background-position: 0 0; } to { background-position: -640px 0; } }
@keyframes guide-book { from { background-position: 0 -80px; } to { background-position: -640px -80px; } }
@keyframes guide-read { from { background-position: 0 -160px; } to { background-position: -640px -160px; } }

/* ==========================================
   FLUIDOC â€” KEY TERMS + WORKSPACE
   ========================================== */
.fd-keyterm {
    color: var(--orange); border-bottom: 1px dashed rgba(99,102,241,0.3);
    cursor: pointer; transition: all 0.3s; position: relative; display: inline;
    animation: fdTermPulse 3s ease-in-out infinite;
}
.fd-keyterm:hover { animation: none; color: #818cf8; text-shadow: 0 0 16px rgba(99,102,241,0.35); border-bottom-color: var(--orange); }
.fd-keyterm.extracted { background: rgba(99,102,241,0.12); border-bottom-style: solid; }
.fd-keyterm.related-glow { color: #818cf8; text-shadow: 0 0 22px rgba(99,102,241,0.5); }
@keyframes fdTermPulse { 0%, 100% { border-bottom-color: rgba(99,102,241,0.2); } 50% { border-bottom-color: rgba(99,102,241,0.6); } }
@keyframes fdPulse { 0% { box-shadow: 0 0 0 0 rgba(99,102,241,0.5); } 100% { box-shadow: 0 0 0 14px rgba(99,102,241,0); } }
.fd-keyterm.pulse-glow { animation: fdPulse 0.7s ease-out; }

/* Selection toolbar */
.fd-toolbar {
    position: fixed; z-index: 9800;
    background: rgba(12,10,9,0.95); backdrop-filter: blur(24px);
    border: 1px solid rgba(99,102,241,0.2); border-radius: 100px;
    padding: 0.35rem 0.5rem; display: flex; align-items: center; gap: 0.25rem;
    box-shadow: 0 12px 40px rgba(0,0,0,0.6), 0 0 20px var(--orange-glow);
    opacity: 0; transform: translateY(8px) scale(0.9);
    transition: all 0.3s cubic-bezier(0.34,1.56,0.64,1); pointer-events: none;
}
.fd-toolbar.visible { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
.fd-toolbar-label { font-family: 'JetBrains Mono', monospace; font-size: 0.55rem; font-weight: 500; color: var(--text-dim); text-transform: uppercase; letter-spacing: 0.08em; padding: 0 0.4rem; white-space: nowrap; }
.fd-tool { width: 34px; height: 34px; border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 0.85rem; transition: all 0.2s; background: transparent; color: var(--text-dim); position: relative; }
.fd-tool:hover { background: rgba(255,255,255,0.1); color: var(--text); transform: scale(1.15); }
.fd-tool.color { font-size: 1rem; }
.fd-tool.color::after { content: ''; position: absolute; bottom: 3px; left: 50%; transform: translateX(-50%); width: 14px; height: 3px; border-radius: 2px; }
.fd-tool.color-orange::after { background: var(--orange); }
.fd-tool.color-violet::after { background: var(--violet); }
.fd-tool.color-cyan::after { background: var(--cyan); }
.fd-tool.color-emerald::after { background: var(--emerald); }
.fd-divider { width: 1px; height: 20px; background: rgba(255,255,255,0.1); margin: 0 2px; }

/* Highlight classes */
.fd-hl { border-radius: 2px; cursor: pointer; transition: all 0.3s; }
.fd-hl:hover { filter: brightness(1.3); }
.fd-hl-orange { background: rgba(99,102,241,0.2); border-bottom: 2px solid rgba(99,102,241,0.5); }
.fd-hl-violet { background: rgba(139,92,246,0.2); border-bottom: 2px solid rgba(139,92,246,0.5); }
.fd-hl-cyan   { background: rgba(6,182,212,0.2); border-bottom: 2px solid rgba(6,182,212,0.5); }
.fd-hl-emerald{ background: rgba(16,185,129,0.2); border-bottom: 2px solid rgba(16,185,129,0.5); }

/* Workspace */
.fd-workspace { position: fixed; top: 0; right: 0; width: 360px; height: 100vh; background: rgba(12,10,9,0.94); backdrop-filter: blur(24px); border-left: 1px solid var(--surface-glass-border); z-index: 960; transform: translateX(100%); transition: transform 0.5s cubic-bezier(0.22,1,0.36,1); display: flex; flex-direction: column; }
.fd-workspace.open { transform: translateX(0); }
body.ws-open .guide { right: calc(2rem + 370px); }
.fd-ws-header { padding: 0.85rem 1.15rem; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; flex-shrink: 0; }
.fd-ws-tabs { display: flex; gap: 0.1rem; }
.fd-ws-tab { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; font-weight: 500; padding: 0.35rem 0.6rem; border-radius: var(--radius-sm); border: none; cursor: pointer; background: transparent; color: var(--text-dim); transition: all 0.2s; text-transform: uppercase; letter-spacing: 0.06em; }
.fd-ws-tab:hover { color: var(--text); background: rgba(255,255,255,0.04); }
.fd-ws-tab.active { color: var(--orange); background: var(--orange-glow); }
.fd-ws-close { background: none; border: none; color: var(--text-dim); font-size: 1.3rem; cursor: pointer; padding: 0.15rem 0.35rem; border-radius: 6px; transition: all 0.2s; line-height: 1; }
.fd-ws-close:hover { color: var(--text); background: rgba(255,255,255,0.05); }
.fd-ws-body { flex: 1; overflow-y: auto; padding: 0.75rem 1rem; }
.fd-ws-body::-webkit-scrollbar { width: 4px; }
.fd-ws-body::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); border-radius: 2px; }
.fd-ws-panel { display: none; }
.fd-ws-panel.active { display: block; }
.fd-ws-empty { text-align: center; padding: 2.5rem 1.5rem; color: var(--text-dim); }
.fd-ws-empty-icon { font-size: 2.5rem; margin-bottom: 0.7rem; opacity: 0.25; }
.fd-ws-empty p { font-size: 0.8rem; line-height: 1.7; }
.fd-search { padding: 0.65rem 1rem; border-bottom: 1px solid var(--border); flex-shrink: 0; display: none; }
.fd-search.active { display: block; }
.fd-search-input { width: 100%; padding: 0.45rem 0.7rem; background: rgba(255,255,255,0.04); border: 1px solid var(--border); border-radius: var(--radius-sm); color: var(--text); font-family: inherit; font-size: 0.8rem; outline: none; transition: border-color 0.2s; }
.fd-search-input:focus { border-color: var(--orange); }
.fd-search-input::placeholder { color: var(--text-dim); }
.fd-search-meta { font-size: 0.65rem; color: var(--text-dim); margin-top: 0.4rem; font-family: 'JetBrains Mono', monospace; }
.fd-search-match { background: rgba(99,102,241,0.25); border-radius: 2px; outline: 2px solid rgba(99,102,241,0.35); scroll-margin-top: 100px; }
.fd-search-match.current { background: rgba(99,102,241,0.45); outline-color: var(--orange); }

/* Excerpt cards */
.fd-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-md); padding: 0.8rem 0.9rem; margin-bottom: 0.5rem; position: relative; transition: all 0.3s; cursor: pointer; animation: fdCardIn 0.4s cubic-bezier(0.34,1.56,0.64,1) both; }
@keyframes fdCardIn { from { opacity: 0; transform: translateX(30px) scale(0.93); } to { opacity: 1; transform: translateX(0) scale(1); } }
.fd-card:hover { border-color: rgba(99,102,241,0.35); box-shadow: 0 6px 24px rgba(0,0,0,0.35), 0 0 20px var(--orange-glow); transform: translateX(-3px); }
.fd-card-section { font-family: 'JetBrains Mono', monospace; font-size: 0.55rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 0.35rem; display: flex; align-items: center; gap: 0.35rem; }
.fd-card-dot { width: 5px; height: 5px; border-radius: 50%; flex-shrink: 0; }
.fd-card-text { font-size: 0.78rem; color: var(--text-secondary); line-height: 1.5; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
.fd-card-remove { position: absolute; top: 0.35rem; right: 0.35rem; background: none; border: none; color: var(--text-dim); font-size: 0.7rem; cursor: pointer; opacity: 0; transition: all 0.2s; padding: 0.15rem; border-radius: 4px; }
.fd-card:hover .fd-card-remove { opacity: 1; }
.fd-card-remove:hover { color: #ef4444; }

/* SVG connections */
.fd-svg { position: fixed; inset: 0; z-index: 5; pointer-events: none; overflow: visible; }
.fd-conn { stroke: var(--orange); stroke-width: 1.5; stroke-dasharray: 6 4; fill: none; opacity: 0; transition: opacity 0.45s; filter: drop-shadow(0 0 4px rgba(99,102,241,0.25)); }
.fd-conn.visible { opacity: 0.5; }
.fd-dot { fill: var(--orange); opacity: 0; transition: opacity 0.4s; }
.fd-dot.visible { opacity: 0.65; }

/* Toggle + minimap + bar + toast */
.fd-toggle { position: fixed; right: 1.5rem; top: 50%; transform: translateY(-50%); z-index: 955; width: 44px; height: 44px; border-radius: 50%; background: rgba(12,10,9,0.8); backdrop-filter: blur(16px); border: 1px solid var(--surface-glass-border); color: var(--orange); cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.35s; box-shadow: 0 4px 20px rgba(0,0,0,0.4); opacity: 0; pointer-events: none; }
.fd-toggle.visible { opacity: 1; pointer-events: auto; }
.fd-toggle:hover { transform: translateY(-50%) scale(1.12); border-color: var(--orange); box-shadow: 0 0 30px var(--orange-glow); }
body.ws-open .fd-toggle { right: calc(1.5rem + 370px); }
.fd-toggle-badge { position: absolute; top: -5px; right: -5px; min-width: 18px; height: 18px; border-radius: 50%; background: var(--gradient-orange); color: white; font-family: 'JetBrains Mono', monospace; font-size: 0.5rem; font-weight: 700; display: flex; align-items: center; justify-content: center; opacity: 0; transform: scale(0); transition: all 0.35s cubic-bezier(0.34,1.56,0.64,1); padding: 0 3px; }
.fd-toggle-badge.visible { opacity: 1; transform: scale(1); }
.fd-minimap { position: fixed; left: 1.25rem; top: 50%; transform: translateY(-50%); z-index: 940; display: flex; flex-direction: column; gap: 10px; opacity: 0; pointer-events: none; transition: opacity 0.5s; }
.fd-minimap.visible { opacity: 1; pointer-events: auto; }
.fd-mm-dot { width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,0.12); cursor: pointer; transition: all 0.3s; position: relative; }
.fd-mm-dot.active { background: var(--orange); box-shadow: 0 0 10px rgba(99,102,241,0.5); transform: scale(1.8); }
.fd-mm-dot:hover { transform: scale(2.2); background: rgba(255,255,255,0.35); }
.fd-mm-label { position: absolute; left: 16px; top: 50%; transform: translateY(-50%); font-family: 'JetBrains Mono', monospace; font-size: 0.55rem; font-weight: 500; color: var(--text-dim); white-space: nowrap; opacity: 0; transition: opacity 0.2s; pointer-events: none; background: rgba(12,10,9,0.85); padding: 0.1rem 0.4rem; border-radius: 3px; }
.fd-mm-dot:hover .fd-mm-label, .fd-mm-dot.active .fd-mm-label { opacity: 1; }
.fd-toast { position: fixed; bottom: 5rem; left: 50%; transform: translateX(-50%) translateY(20px); background: rgba(12,10,9,0.9); backdrop-filter: blur(16px); border: 1px solid var(--surface-glass-border); border-radius: var(--radius-md); padding: 0.5rem 1.1rem; font-size: 0.72rem; color: var(--text-secondary); z-index: 9600; opacity: 0; transition: all 0.4s cubic-bezier(0.22,1,0.36,1); pointer-events: none; white-space: nowrap; box-shadow: 0 8px 30px rgba(0,0,0,0.5); }
.fd-toast.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
.fd-hint { position: fixed; bottom: 5.5rem; left: 50%; transform: translateX(-50%) translateY(20px); background: rgba(12,10,9,0.92); backdrop-filter: blur(16px); border: 1px solid rgba(99,102,241,0.25); border-radius: var(--radius-md); padding: 0.6rem 1.2rem; font-size: 0.72rem; color: var(--text-secondary); z-index: 9500; opacity: 0; transition: all 0.5s cubic-bezier(0.22,1,0.36,1); pointer-events: none; display: flex; align-items: center; gap: 0.6rem; box-shadow: 0 8px 30px rgba(0,0,0,0.5); }
.fd-hint.visible { opacity: 1; transform: translateX(-50%) translateY(0); pointer-events: auto; }
.fd-hint-dismiss { background: none; border: none; color: var(--text-dim); cursor: pointer; font-size: 0.9rem; padding: 0 0.2rem; }

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg-deep); }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 4px; }

/* ==========================================
   RESPONSIVE
   ========================================== */
@media (max-width: 1024px) {
    .hero-content { grid-template-columns: 1fr; gap: 2rem; padding-top: 6rem; }
    .hero-character-wrap { order: -1; }
    .stat-strip { grid-template-columns: repeat(2, 1fr); }
    .vs-grid { grid-template-columns: 1fr; }
    .vs-arrow { transform: rotate(90deg); padding: 0.5rem; }
    .bento { grid-template-columns: 1fr; }
    .nav-links { display: none; }
    .mobile-toggle { display: block; }
    .nav-links.open { display: flex; flex-direction: column; position: absolute; top: 64px; left: 0; right: 0; background: rgba(12,10,9,0.9); backdrop-filter: blur(24px); padding: 1rem 1.5rem; border-bottom: 1px solid var(--border); }
    .cursor-glow { display: none; }
    .fd-workspace { width: 300px; }
    .fd-minimap { display: none; }
}
@media (max-width: 768px) {
    .hero h1 { font-size: 2rem; }
    .hero-content { padding: 5rem 1.25rem 3rem; }
    .hero-left { padding: 1.25rem 1.25rem 1.4rem; }
    .hero-meta { flex-direction: column; gap: 0.5rem; }
    .hero-character-wrap { width: 200px; height: 200px; }
    .hero-character { width: 180px; height: 180px; background-size: 1440px 540px; }
    .hero-character-glow { width: 200px; height: 200px; }
    .hero-character.stand { animation: sprite-stand-m 1.9s steps(8) infinite; }
    .hero-character.book { animation: sprite-book-m 1.35s steps(8) infinite; }
    .hero-character.read { animation: sprite-read-m 2.2s steps(8) infinite; }
    @keyframes sprite-stand-m { from { background-position: 0 0; } to { background-position: -1440px 0; } }
    @keyframes sprite-book-m { from { background-position: 0 -180px; } to { background-position: -1440px -180px; } }
    @keyframes sprite-read-m { from { background-position: 0 -360px; } to { background-position: -1440px -360px; } }
    .section-wrap { padding: 3.5rem 1.25rem; }
    .stat-strip { grid-template-columns: 1fr 1fr; }
    .stat-strip-val { font-size: 1.3rem; }
    .stat-strip-item { padding: 1rem 0.75rem; }
    .vs-card { padding: 1.25rem; }
    .bento-card { padding: 1.15rem; }
    .pullquote { padding: 2rem 1rem; }
    .guide-avatar { width: 60px; height: 60px; }
    .guide-sprite { width: 60px; height: 60px; background-size: 480px 180px; }
    .guide-sprite.stand { animation: guide-stand-m 1.9s steps(8) infinite; }
    .guide-sprite.book { animation: guide-book-m 1.35s steps(8) infinite; }
    .guide-sprite.read { animation: guide-read-m 2.2s steps(8) infinite; }
    @keyframes guide-stand-m { from { background-position: 0 0; } to { background-position: -480px 0; } }
    @keyframes guide-book-m { from { background-position: 0 -60px; } to { background-position: -480px -60px; } }
    @keyframes guide-read-m { from { background-position: 0 -120px; } to { background-position: -480px -120px; } }
    .guide-bubble { display: none; }
    .guide { bottom: 1.25rem; right: 1.25rem; }
    .fd-workspace { width: 100vw; }
    .fd-toggle { right: 1rem; bottom: 6rem; top: auto; transform: none; }
    .fd-toggle:hover { transform: scale(1.12); }
}
@media (max-width: 420px) {
    .hero h1 { font-size: 1.7rem; }
    .hero-desc { font-size: 0.92rem; }
    .hero-character-wrap { width: 160px; height: 160px; }
    .hero-character { width: 144px; height: 144px; background-size: 1152px 432px; }
    .hero-character-glow { width: 160px; height: 160px; }
    .hero-character.stand { animation: sprite-stand-xs 1.9s steps(8) infinite; }
    .hero-character.book { animation: sprite-book-xs 1.35s steps(8) infinite; }
    .hero-character.read { animation: sprite-read-xs 2.2s steps(8) infinite; }
    @keyframes sprite-stand-xs { from { background-position: 0 0; } to { background-position: -1152px 0; } }
    @keyframes sprite-book-xs { from { background-position: 0 -144px; } to { background-position: -1152px -144px; } }
    @keyframes sprite-read-xs { from { background-position: 0 -288px; } to { background-position: -1152px -288px; } }
    .section-title { font-size: 1.4rem; }
    .prose { font-size: 0.95rem; }
    .stat-strip { grid-template-columns: 1fr 1fr; gap: 1px; }
    .stat-strip-val { font-size: 1.1rem; }
    .hero-meta-item { font-size: 0.62rem; }
}
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; }
    .reveal { opacity: 1; transform: none; }
    #three-bg { display: none; }
}
    </style>
</head>
<body>

<canvas id="three-bg"></canvas>
<div class="cursor-glow" id="cursor-glow"></div>

<div class="content-layer">

<!-- LOADER -->
<div class="loader" id="loader">
    <div class="loader-logo"><span class="loader-mark">B</span>Blog</div>
    <div class="loader-bar-wrap"><div class="loader-bar" id="loader-bar"></div></div>
    <div class="loader-pct" id="loader-pct">0%</div>
</div>

<div class="scroll-progress" id="scroll-progress"></div>

<!-- NAV -->
<nav id="main-nav">
    <div class="nav-inner">
        <div class="nav-logo"><span class="nav-logo-mark">B</span>Blog</div>
        <ul class="nav-links" id="nav-links">
            <li><a href="#experiment">Experiment</a></li>
            <li><a href="#role">New Role</a></li>
            <li><a href="#environment">Environment</a></li>
            <li><a href="#knowledge">Knowledge</a></li>
            <li><a href="#architecture">Architecture</a></li>
            <li><a href="#culture">Culture</a></li>
            <li><a href="#future">Future</a></li>
        </ul>
        <button class="mobile-toggle" id="mobile-toggle" aria-label="Menu">&#9776;</button>
    </div>
</nav>

<!-- HERO -->
<section class="hero" id="hero">
    <div class="hero-content">
        <div class="hero-left">
            <div class="hero-eyebrow"><span class="eyebrow-line"></span>Engineering Paradigm Shift &mdash; 2026</div>
            <h1>Humans <em>Steer</em>,<br>Agents Execute</h1>
            <p class="hero-desc">OpenAI built a real product with zero human-written code. Humans only guide and design the system, while Codex agents do the coding. This is the end of software engineering as we know it.</p>
            <div class="hero-meta">
                <div class="hero-meta-item"><span>~1M</span> lines of code</div>
                <div class="hero-meta-item"><span>1,500</span> pull requests</div>
                <div class="hero-meta-item"><span>0</span> human-written lines</div>
                <div class="hero-meta-item"><span>5</span> months</div>
            </div>
        </div>
        <div class="hero-character-wrap">
            <div class="hero-character-glow"></div>
            <div class="hero-character stand" id="hero-character"></div>
        </div>
    </div>
    <div class="scroll-hint"><span class="scroll-hint-text">Scroll to read</span><span class="scroll-hint-line"></span></div>
</section>

<!-- ================================================================
     SECTION: THE EXPERIMENT
     ================================================================ -->
<section id="experiment">
    <div class="section-wrap">
        <div class="section-eyebrow reveal"><span class="eyebrow-line"></span>The Zero-Code Experiment</div>
        <h2 class="section-title reveal reveal-delay-1">One Rule: No Human-Written Code</h2>
        <div class="prose reveal reveal-delay-2">
            <p>In August 2025, a small team at OpenAI started with an empty Git repo and imposed a strict constraint: <strong>no human-written code allowed</strong>. If something broke, humans had to fix the <em>system</em>, not the code.</p>
            <p>This forced them to discover the new role of engineers in an AI-native world.</p>
        </div>

        <div class="stat-strip reveal">
            <div class="stat-strip-item"><div class="stat-strip-val">~1M</div><div class="stat-strip-label">Lines of Code</div></div>
            <div class="stat-strip-item"><div class="stat-strip-val">1,500</div><div class="stat-strip-label">Pull Requests</div></div>
            <div class="stat-strip-item"><div class="stat-strip-val">3&rarr;7</div><div class="stat-strip-label">Engineers</div></div>
            <div class="stat-strip-item"><div class="stat-strip-val">0</div><div class="stat-strip-label">Human-Written Lines</div></div>
        </div>

        <div class="prose reveal">
            <p>Codex generated <strong>everything</strong>: app logic, tests, CI/CD, documentation, dashboards, internal tools, scripts, code reviews, and bug fixes.</p>
            <blockquote>"If AI writes all the code, what does an engineer actually do?"</blockquote>
        </div>
    </div>
</section>

<!-- ================================================================
     SECTION: THE NEW ROLE
     ================================================================ -->
<section id="role">
    <div class="section-wrap">
        <div class="section-eyebrow reveal"><span class="eyebrow-line"></span>The Paradigm Shift</div>
        <h2 class="section-title reveal reveal-delay-1">From Coding to System Design</h2>

        <div class="vs-grid reveal">
            <div class="vs-card muted">
                <span class="vs-badge old">Old World</span>
                <h3>Write Code</h3>
                <ul class="vs-list">
                    <li>Coding all day</li>
                    <li>Typing speed matters</li>
                    <li>Implementation focus</li>
                    <li>Debug the code</li>
                    <li>Manual testing</li>
                </ul>
            </div>
            <div class="vs-arrow">&#8594;</div>
            <div class="vs-card highlight">
                <span class="vs-badge new">New World</span>
                <h3>Steer Agents</h3>
                <ul class="vs-list">
                    <li>System design all day</li>
                    <li>Thinking speed matters</li>
                    <li>Specification focus</li>
                    <li>Debug the environment</li>
                    <li>Automated feedback loops</li>
                </ul>
            </div>
        </div>

        <div class="prose reveal">
            <p>Instead of coding, engineers now focus on: designing the environment, defining goals and constraints, creating feedback loops, building guardrails, and improving the system when the agent fails.</p>
            <p>The job shifts from <strong>implementation to specification</strong>, from <strong>typing to thinking</strong>.</p>
        </div>
    </div>
</section>

<!-- ================================================================
     SECTION: ENVIRONMENT DESIGN
     ================================================================ -->
<section id="environment">
    <div class="section-wrap">
        <div class="section-eyebrow reveal"><span class="eyebrow-line"></span>The Core Insight</div>
        <h2 class="section-title reveal reveal-delay-1">Environment Matters More Than the Model</h2>

        <div class="prose reveal">
            <p>Initially progress was painfully slow. Not because Codex was weak &mdash; but because <strong>the environment was poorly designed</strong>.</p>

            <blockquote>When the agent fails, the fix is NOT "try prompting harder."<br><br>The real fix is: <strong>"What capability is missing in the environment?"</strong></blockquote>

            <h3>Agent Legibility</h3>
            <p>The core principle: <em>anything the AI cannot see, does not exist</em>.</p>
        </div>

        <div class="bento reveal">
            <div class="bento-card"><div class="bento-icon">&#127912;</div><h4>Run App Locally</h4><p>Agent can boot the full application and interact with it.</p></div>
            <div class="bento-card"><div class="bento-icon">&#128187;</div><h4>Chrome DevTools</h4><p>Inspect DOM, network, console &mdash; just like a human developer.</p></div>
            <div class="bento-card"><div class="bento-icon">&#128247;</div><h4>Screenshots</h4><p>Capture and analyze UI state visually for bug reproduction.</p></div>
            <div class="bento-card"><div class="bento-icon">&#128202;</div><h4>Logs &amp; Metrics</h4><p>Read application logs, performance metrics, and distributed traces.</p></div>
        </div>

        <div class="prose reveal">
            <p>With these capabilities, the agent can reproduce bugs, test UI, measure performance, and verify fixes. It can work <strong>continuously for 6 hours</strong> on a single task.</p>
        </div>
    </div>
</section>

<!-- ================================================================
     SECTION: KNOWLEDGE SYSTEMS
     ================================================================ -->
<section id="knowledge">
    <div class="section-wrap">
        <div class="section-eyebrow reveal"><span class="eyebrow-line"></span>Knowledge Architecture</div>
        <h2 class="section-title reveal reveal-delay-1">Give the Agent a Map, Not a Book</h2>

        <div class="prose reveal">
            <p>They learned a painful lesson: a giant instruction manual (<code>AGENTS.md</code>) <strong>does not work</strong>.</p>

            <p>Why?</p>
            <ul>
                <li>Context windows are limited</li>
                <li>Long docs become stale fast</li>
                <li>Agents get confused by walls of text</li>
            </ul>

            <p>Instead they created a <strong>knowledge repository</strong> &mdash; think of it like a Wikipedia inside the repo:</p>
        </div>

        <div class="bento reveal">
            <div class="bento-card"><div class="bento-icon">&#128195;</div><h4>Architecture Docs</h4><p>System design, layer boundaries, component responsibilities.</p></div>
            <div class="bento-card"><div class="bento-icon">&#128221;</div><h4>Design Docs</h4><p>Decision records, trade-off analysis, rejected alternatives.</p></div>
            <div class="bento-card"><div class="bento-icon">&#128203;</div><h4>Plans &amp; Specs</h4><p>Product specs, roadmap items, acceptance criteria.</p></div>
            <div class="bento-card"><div class="bento-icon">&#128295;</div><h4>Tech Debt Tracker</h4><p>Known issues, cleanup priorities, refactoring targets.</p></div>
        </div>

        <div class="callout reveal">
            <h4>Progressive Disclosure of Knowledge</h4>
            <p>The short AGENTS.md becomes a <strong>table of contents</strong> pointing into the knowledge base. Give the agent a map &mdash; not a book.</p>
        </div>
    </div>
</section>

<!-- ================================================================
     SECTION: ARCHITECTURE
     ================================================================ -->
<section id="architecture">
    <div class="section-wrap">
        <div class="section-eyebrow reveal"><span class="eyebrow-line"></span>Structural Discipline</div>
        <h2 class="section-title reveal reveal-delay-1">Architecture Becomes Mandatory from Day One</h2>

        <div class="prose reveal">
            <p>Humans often delay architectural decisions. With agents, <strong>architecture becomes critical immediately</strong>. Because agents need <em>strict boundaries</em> to operate safely.</p>

            <p>They enforced a rigid layered architecture:</p>

            <pre><code>Types &rarr; Config &rarr; Repo &rarr; Service &rarr; Runtime &rarr; UI</code></pre>

            <p>And enforced it with:</p>
            <ul>
                <li>Custom linters</li>
                <li>Structural tests</li>
                <li>Naming conventions</li>
                <li>File size limits</li>
                <li>Logging rules</li>
            </ul>
        </div>

        <div class="callout reveal">
            <h4>Rails on a Train Track</h4>
            <p>These rules are like rails on a train track. Without rails, the agent derails. With rails, the agent moves fast &mdash; <strong>safely</strong>.</p>
        </div>

        <div class="pullquote reveal">
            <blockquote>"The scarce resource is no longer coding ability. It is <strong>human attention and judgment</strong>."</blockquote>
        </div>
    </div>
</section>

<!-- ================================================================
     SECTION: CULTURE SHIFT
     ================================================================ -->
<section id="culture">
    <div class="section-wrap">
        <div class="section-eyebrow reveal"><span class="eyebrow-line"></span>Engineering Culture</div>
        <h2 class="section-title reveal reveal-delay-1">Merge Fast, Fix Continuously</h2>

        <div class="prose reveal">
            <h3>Agent-to-Agent Development</h3>
            <p>This part is wild. Agents now open PRs, review PRs, comment on PRs, fix feedback, and merge PRs. Humans sometimes review, but often <strong>agents review agents</strong>.</p>

            <h3>The Cultural Shift</h3>
            <p>When AI produces massive code quickly, the old rule breaks down:</p>

            <blockquote><strong>Old rule:</strong> Never merge until perfect.<br><strong>New rule:</strong> Merge fast, fix continuously.</blockquote>

            <p>Because fixes are cheap (an agent does them) and waiting is expensive (blocks the pipeline).</p>

            <h3>The "AI Slop" Problem</h3>
            <p>Agents copy patterns from the repo. If bad patterns exist, <strong>they spread exponentially</strong>. Initially the team spent 20% of their time cleaning "AI slop."</p>
        </div>

        <div class="callout reveal">
            <h4>Garbage Collection for Codebases</h4>
            <p>Their solution: <strong>automatic cleanup agents</strong> that scan code regularly, detect bad patterns, open refactor PRs, and auto-merge fixes. Just as runtime GC manages memory, code GC manages quality.</p>
        </div>
    </div>
</section>

<!-- ================================================================
     SECTION: THE FUTURE
     ================================================================ -->
<section id="future">
    <div class="section-wrap">
        <div class="section-eyebrow reveal"><span class="eyebrow-line"></span>What's Next</div>
        <h2 class="section-title reveal reveal-delay-1">Engineering Becomes Meta-Engineering</h2>

        <div class="prose reveal">
            <p>Today, given a bug report, the agent can:</p>
            <ol>
                <li>Reproduce the bug</li>
                <li>Record a video of the reproduction</li>
                <li>Fix the code</li>
                <li>Test the fix</li>
                <li>Record a new video proving the fix</li>
                <li>Open a pull request</li>
                <li>Respond to review feedback</li>
                <li>Fix build failures</li>
                <li>Merge</li>
            </ol>
            <p>It escalates to humans <strong>only when judgment is needed</strong>.</p>
        </div>

        <div class="bento reveal">
            <div class="bento-card"><div class="bento-icon">&#127919;</div><h4>Environment Design</h4><p>What tools does the agent need to succeed?</p></div>
            <div class="bento-card"><div class="bento-icon">&#128260;</div><h4>Feedback Loops</h4><p>How does the agent know it succeeded?</p></div>
            <div class="bento-card"><div class="bento-icon">&#128737;</div><h4>Guardrails</h4><p>What should the agent never do?</p></div>
            <div class="bento-card"><div class="bento-icon">&#128218;</div><h4>Knowledge Organization</h4><p>How does the agent find what it needs?</p></div>
        </div>

        <div class="pullquote reveal">
            <blockquote>"The AI-native enterprise is not about AI writing code. It is about humans building the <strong>factory</strong> that builds software."</blockquote>
        </div>

    </div>
</section>

</div><!-- /content-layer -->

<!-- FLOATING GUIDE -->
<div class="guide" id="guide">
    <div class="guide-bubble" id="guide-bubble">Welcome to the blog!</div>
    <div class="guide-avatar"><div class="guide-sprite stand" id="guide-sprite"></div></div>
</div>

<!-- FLUIDOC ELEMENTS -->
<svg class="fd-svg" id="fd-svg"></svg>
<div class="fd-toolbar" id="fd-toolbar">
    <span class="fd-toolbar-label">Highlight</span>
    <button class="fd-tool color color-orange" data-color="orange">&#9679;</button>
    <button class="fd-tool color color-violet" data-color="violet">&#9679;</button>
    <button class="fd-tool color color-cyan" data-color="cyan">&#9679;</button>
    <button class="fd-tool color color-emerald" data-color="emerald">&#9679;</button>
    <div class="fd-divider"></div>
    <button class="fd-tool" id="fd-extract-btn">&#128203;</button>
</div>
<button class="fd-toggle" id="fd-toggle" aria-label="Open workspace">
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="1" y="1" width="16" height="16" rx="2"/><line x1="7" y1="1" x2="7" y2="17"/><line x1="10" y1="5" x2="14" y2="5"/><line x1="10" y1="9" x2="14" y2="9"/><line x1="10" y1="13" x2="14" y2="13"/></svg>
    <span class="fd-toggle-badge" id="fd-badge">0</span>
</button>
<div class="fd-workspace" id="fd-workspace">
    <div class="fd-ws-header">
        <div class="fd-ws-tabs">
            <button class="fd-ws-tab active" data-panel="excerpts">Excerpts</button>
            <button class="fd-ws-tab" data-panel="search">Search</button>
        </div>
        <button class="fd-ws-close" id="fd-ws-close">&times;</button>
    </div>
    <div class="fd-search" id="fd-search-bar">
        <input type="text" class="fd-search-input" id="fd-search-input" placeholder="Search... (Ctrl+K)">
        <div class="fd-search-meta" id="fd-search-meta"></div>
    </div>
    <div class="fd-ws-body" id="fd-ws-body">
        <div class="fd-ws-panel active" id="fd-panel-excerpts">
            <div class="fd-ws-empty" id="fd-ws-empty">
                <div class="fd-ws-empty-icon">&#128203;</div>
                <p>Select text to highlight.<br>Click <span style="color:var(--orange)">glowing terms</span> to extract.<br><br>Build your concept map.</p>
            </div>
        </div>
        <div class="fd-ws-panel" id="fd-panel-search"></div>
    </div>
</div>
<div class="fd-minimap" id="fd-minimap">
    <div class="fd-mm-dot" data-section="hero"><span class="fd-mm-label">Hero</span></div>
    <div class="fd-mm-dot" data-section="experiment"><span class="fd-mm-label">Experiment</span></div>
    <div class="fd-mm-dot" data-section="role"><span class="fd-mm-label">New Role</span></div>
    <div class="fd-mm-dot" data-section="environment"><span class="fd-mm-label">Environment</span></div>
    <div class="fd-mm-dot" data-section="knowledge"><span class="fd-mm-label">Knowledge</span></div>
    <div class="fd-mm-dot" data-section="architecture"><span class="fd-mm-label">Architecture</span></div>
    <div class="fd-mm-dot" data-section="culture"><span class="fd-mm-label">Culture</span></div>
    <div class="fd-mm-dot" data-section="future"><span class="fd-mm-label">Future</span></div>
</div>
<div class="fd-hint" id="fd-hint"><span>&#9998;</span><span>Select text to highlight &middot; Click <span style="color:var(--orange)">glowing terms</span> to extract</span><button class="fd-hint-dismiss" id="fd-hint-dismiss">&times;</button></div>
<div class="fd-toast" id="fd-toast"></div>

<footer>
    <p class="footer-copy">Humans Steer, Agents Execute &ndash; A Blog Post &ndash; 2026</p>
</footer>

<!-- ================================================================
     THREE.JS + PAGE JAVASCRIPT
     ================================================================ -->
<script type="importmap">
{ "imports": { "three": "https://cdn.jsdelivr.net/npm/three@0.162.0/build/three.module.js", "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.162.0/examples/jsm/" } }
</script>
<script type="module">
import * as THREE from 'three';
import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

// ---- THREE.JS PARTICLES ----
const canvas = document.getElementById('three-bg');
const reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
let scene, camera, renderer, composer, particles, particlePositions, particleVelocities;
let lines, linePositions, lineColors;
let time = 0, scrollY = 0;
let targetColor = new THREE.Color(0x6366f1);
let currentColor = new THREE.Color(0x6366f1);
let mouseNorm = { x: 0, y: 0 };
const PC = reducedMotion ? 0 : (window.innerWidth < 768 ? 300 : 800);
const SPREAD = 30, LC = 120;

function initThree() {
    if (reducedMotion || !canvas) return;
    scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x0c0a09, 0.028);
    camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 120);
    camera.position.set(0, 0, 28);
    renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: false });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 1.5));
    renderer.setSize(window.innerWidth, window.innerHeight);
    const tc = document.createElement('canvas'); tc.width = 64; tc.height = 64;
    const ctx = tc.getContext('2d');
    const g = ctx.createRadialGradient(32,32,0,32,32,32);
    g.addColorStop(0,'rgba(255,255,255,1)'); g.addColorStop(0.15,'rgba(255,255,255,0.7)');
    g.addColorStop(0.5,'rgba(255,255,255,0.15)'); g.addColorStop(1,'rgba(255,255,255,0)');
    ctx.fillStyle = g; ctx.fillRect(0,0,64,64);
    const tex = new THREE.CanvasTexture(tc);
    const geom = new THREE.BufferGeometry();
    particlePositions = new Float32Array(PC * 3);
    const cols = new Float32Array(PC * 3), sizes = new Float32Array(PC);
    particleVelocities = new Float32Array(PC * 3);
    for (let i = 0; i < PC; i++) {
        const t = Math.random()*Math.PI*2, p = Math.acos(2*Math.random()-1), r = Math.pow(Math.random(),0.6)*SPREAD;
        particlePositions[i*3]=r*Math.sin(p)*Math.cos(t); particlePositions[i*3+1]=r*Math.sin(p)*Math.sin(t); particlePositions[i*3+2]=r*Math.cos(p)-SPREAD*0.3;
        sizes[i]=Math.random()*2.5+0.5;
        particleVelocities[i*3]=(Math.random()-0.5)*0.003; particleVelocities[i*3+1]=(Math.random()-0.5)*0.003; particleVelocities[i*3+2]=(Math.random()-0.5)*0.002;
    }
    geom.setAttribute('position', new THREE.BufferAttribute(particlePositions,3));
    geom.setAttribute('color', new THREE.BufferAttribute(cols,3));
    geom.setAttribute('size', new THREE.BufferAttribute(sizes,1));
    particles = new THREE.Points(geom, new THREE.PointsMaterial({ size:0.18, map:tex, transparent:true, blending:THREE.AdditiveBlending, depthWrite:false, vertexColors:true, sizeAttenuation:true }));
    scene.add(particles);
    const lg = new THREE.BufferGeometry();
    linePositions = new Float32Array(LC*6); lineColors = new Float32Array(LC*6);
    lg.setAttribute('position', new THREE.BufferAttribute(linePositions,3));
    lg.setAttribute('color', new THREE.BufferAttribute(lineColors,3));
    lines = new THREE.LineSegments(lg, new THREE.LineBasicMaterial({ vertexColors:true, transparent:true, opacity:0.15, blending:THREE.AdditiveBlending, depthWrite:false }));
    scene.add(lines);
    composer = new EffectComposer(renderer);
    composer.addPass(new RenderPass(scene, camera));
    composer.addPass(new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.2, 0.5, 0.85));
    window.addEventListener('resize', () => { camera.aspect=window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth,window.innerHeight); composer.setSize(window.innerWidth,window.innerHeight); });
}
function animateThree() {
    if (!scene) return; requestAnimationFrame(animateThree); time += 0.003;
    const sp = scrollY / (document.documentElement.scrollHeight - window.innerHeight || 1);
    camera.position.z = 28 - sp * 30; camera.position.x = Math.sin(time*0.3)*0.8+mouseNorm.x*2; camera.position.y = Math.cos(time*0.2)*0.5+mouseNorm.y*1.5;
    camera.lookAt(0,0,camera.position.z-15); currentColor.lerp(targetColor, 0.015);
    const pos = particles.geometry.attributes.position.array, col = particles.geometry.attributes.color.array;
    for (let i=0;i<PC;i++) { pos[i*3]+=particleVelocities[i*3]+Math.sin(time*2+i*0.01)*0.001; pos[i*3+1]+=particleVelocities[i*3+1]+Math.cos(time*1.5+i*0.01)*0.001; pos[i*3+2]+=particleVelocities[i*3+2]; const b=0.4+Math.sin(time*3+i*0.05)*0.3; col[i*3]=currentColor.r*b; col[i*3+1]=currentColor.g*b; col[i*3+2]=currentColor.b*b; }
    particles.geometry.attributes.position.needsUpdate=true; particles.geometry.attributes.color.needsUpdate=true;
    let li=0; const md=4;
    for(let i=0;i<PC&&li<LC;i+=3){for(let j=i+1;j<PC&&li<LC;j+=5){const dx=pos[i*3]-pos[j*3],dy=pos[i*3+1]-pos[j*3+1],dz=pos[i*3+2]-pos[j*3+2],d=dx*dx+dy*dy+dz*dz;if(d<md*md){const a=1-Math.sqrt(d)/md;linePositions[li*6]=pos[i*3];linePositions[li*6+1]=pos[i*3+1];linePositions[li*6+2]=pos[i*3+2];linePositions[li*6+3]=pos[j*3];linePositions[li*6+4]=pos[j*3+1];linePositions[li*6+5]=pos[j*3+2];lineColors[li*6]=currentColor.r*a;lineColors[li*6+1]=currentColor.g*a;lineColors[li*6+2]=currentColor.b*a;lineColors[li*6+3]=currentColor.r*a;lineColors[li*6+4]=currentColor.g*a;lineColors[li*6+5]=currentColor.b*a;li++;}}}
    for(let i=li;i<LC;i++){linePositions[i*6]=linePositions[i*6+1]=linePositions[i*6+2]=linePositions[i*6+3]=linePositions[i*6+4]=linePositions[i*6+5]=0;}
    lines.geometry.attributes.position.needsUpdate=true; lines.geometry.attributes.color.needsUpdate=true; composer.render();
}
initThree(); animateThree();

// ---- SCROLL ----
let scrollTicking = false;
window.addEventListener('scroll', () => { scrollY = window.scrollY; if(!scrollTicking){requestAnimationFrame(()=>{document.getElementById('scroll-progress').style.width=((scrollY/(document.documentElement.scrollHeight-window.innerHeight||1))*100)+'%';scrollTicking=false;});scrollTicking=true;} }, { passive: true });

// ---- CURSOR GLOW ----
const cursorGlow = document.getElementById('cursor-glow');
let mouseActive = false;
document.addEventListener('mousemove', (e) => { mouseNorm.x=(e.clientX/window.innerWidth-0.5)*2; mouseNorm.y=-(e.clientY/window.innerHeight-0.5)*2; if(cursorGlow){cursorGlow.style.left=e.clientX+'px';cursorGlow.style.top=e.clientY+'px';if(!mouseActive){cursorGlow.classList.add('active');mouseActive=true;}} });

// ---- 3D TILT ON CARDS ----
document.querySelectorAll('.bento-card, .callout').forEach(card => {
    card.addEventListener('mousemove', (e) => { const r=card.getBoundingClientRect(),x=(e.clientX-r.left)/r.width,y=(e.clientY-r.top)/r.height; card.style.transform=`perspective(800px) rotateX(${(0.5-y)*6}deg) rotateY(${(x-0.5)*6}deg) translateZ(4px)`; card.style.setProperty('--mouse-x',(x*100)+'%'); card.style.setProperty('--mouse-y',(y*100)+'%'); });
    card.addEventListener('mouseleave', () => { card.style.transform=''; });
});

// ---- LOADER ----
const loader=document.getElementById('loader'),loaderBar=document.getElementById('loader-bar'),loaderPct=document.getElementById('loader-pct');
let loaderDone=false;
function updateLoader(p){loaderBar.style.width=p+'%';loaderPct.textContent=Math.round(p)+'%';}
function finishLoader(){if(loaderDone)return;loaderDone=true;updateLoader(100);setTimeout(()=>{loader.classList.add('done');document.getElementById('main-nav').classList.add('visible');startHero();},500);}
const img=new Image();img.onload=img.onerror=()=>{updateLoader(90);finishLoader();};img.src='../images/shashank_blog_spritesheet.png';
setTimeout(finishLoader,4000);

function setSpriteState(el,state){
    if(!el)return;
    el.classList.remove('stand','book','read');
    el.classList.add(state);
}
let heroCycleTimer=null;
function startHeroSpriteCycle(){
    const hero=document.getElementById('hero-character');
    if(!hero)return;
    const cycle=()=>{
        setSpriteState(hero,'stand');
        heroCycleTimer=setTimeout(()=>{
            setSpriteState(hero,'book');
            heroCycleTimer=setTimeout(()=>{
                setSpriteState(hero,'read');
                heroCycleTimer=setTimeout(cycle,5600);
            },1400);
        },4200);
    };
    cycle();
}
function startHero(){
    if(typeof anime==='undefined')return;
    anime.timeline({easing:'easeOutCubic'}).add({targets:'.hero-eyebrow',opacity:[0,1],translateY:[20,0],duration:800}).add({targets:'.hero h1',opacity:[0,1],translateY:[40,0],duration:1200},'-=500').add({targets:'.hero-desc',opacity:[0,1],translateY:[30,0],duration:900},'-=800').add({targets:'.hero-meta',opacity:[0,1],translateY:[20,0],duration:700},'-=600').add({targets:'.hero-character-wrap',opacity:[0,1],translateX:[60,0],duration:1200,easing:'easeOutExpo'},'-=1000');
    setTimeout(startHeroSpriteCycle,800);
}

// ---- REVEAL ----
const revealObs=new IntersectionObserver(e=>{e.forEach(en=>{if(en.isIntersecting){en.target.classList.add('visible');revealObs.unobserve(en.target);}});},{threshold:0.06});
document.querySelectorAll('.reveal').forEach(el=>revealObs.observe(el));

// ---- NAV SPY ----
const navLinks=document.querySelectorAll('.nav-links a');
const spyObs=new IntersectionObserver(e=>{e.forEach(en=>{if(en.isIntersecting)navLinks.forEach(l=>l.classList.toggle('active',l.getAttribute('href')==='#'+en.target.id));});},{rootMargin:'-30% 0px -65% 0px'});
document.querySelectorAll('section[id]').forEach(s=>{if(s.id!=='hero')spyObs.observe(s);});

// ---- MOBILE NAV ----
document.getElementById('mobile-toggle').addEventListener('click',()=>document.getElementById('nav-links').classList.toggle('open'));
document.querySelectorAll('#nav-links a').forEach(l=>l.addEventListener('click',()=>document.getElementById('nav-links').classList.remove('open')));

// ---- FLOATING GUIDE ----
const guide=document.getElementById('guide'),guideBubble=document.getElementById('guide-bubble'),guideSprite=document.getElementById('guide-sprite');
const guideMessages={experiment:"Zero human code â€” wild!",role:"The job is completely different now.",environment:"Environment > prompting.",knowledge:"Maps, not books.",architecture:"Rails keep agents safe.",culture:"Merge fast, fix continuously.",future:"Meta-engineering is here."};
let bubbleTimeout=null;
let guideAnimLock=false;
function showBubble(m){guideBubble.textContent=m;guideBubble.classList.add('visible');clearTimeout(bubbleTimeout);bubbleTimeout=setTimeout(()=>guideBubble.classList.remove('visible'),3000);}
function triggerGuideRead(){
    if(guideAnimLock)return;
    guideAnimLock=true;
    setSpriteState(guideSprite,'book');
    setTimeout(()=>{
        setSpriteState(guideSprite,'read');
        setTimeout(()=>{
            setSpriteState(guideSprite,'stand');
            guideAnimLock=false;
        },1800);
    },1200);
}
new IntersectionObserver(e=>{e.forEach(en=>{if(en.isIntersecting)guide.classList.remove('visible');else{guide.classList.add('visible');showBubble("Welcome to the blog!");}});},{threshold:0.3}).observe(document.getElementById('hero'));
const secObs=new IntersectionObserver(e=>{e.forEach(en=>{if(en.isIntersecting&&guide.classList.contains('visible')&&guideMessages[en.target.id]){triggerGuideRead();showBubble(guideMessages[en.target.id]);}});},{rootMargin:'-40% 0px -55% 0px'});
['experiment','role','environment','knowledge','architecture','culture','future'].forEach(id=>{const el=document.getElementById(id);if(el)secObs.observe(el);});

// ==========================================
// FLUIDOC FEATURES
// ==========================================
const fdWorkspace=document.getElementById('fd-workspace'),fdToggle=document.getElementById('fd-toggle'),fdBadge=document.getElementById('fd-badge'),fdWsEmpty=document.getElementById('fd-ws-empty'),fdToolbar=document.getElementById('fd-toolbar'),fdSvg=document.getElementById('fd-svg'),fdMinimap=document.getElementById('fd-minimap'),fdToastEl=document.getElementById('fd-toast'),fdSearchInput=document.getElementById('fd-search-input'),fdSearchMeta=document.getElementById('fd-search-meta'),fdPanelExcerpts=document.getElementById('fd-panel-excerpts'),fdPanelSearch=document.getElementById('fd-panel-search');
let fdExcerpts=[],fdToastTimer=null,fdActiveConns=[],hlIdC=0,fdSearchMatches=[],fdSearchIdx=-1,fdSearchDebounce=null;
const fdNames={hero:'Hero',experiment:'Experiment',role:'New Role',environment:'Environment',knowledge:'Knowledge',architecture:'Architecture',culture:'Culture',future:'Future'};
const fdKeyTerms=[{term:'Codex',concept:'codex'},{term:'agent',concept:'agent'},{term:'environment',concept:'environment'},{term:'AGENTS.md',concept:'agents-md'},{term:'guardrails',concept:'guardrails'},{term:'feedback loop',concept:'feedback'},{term:'meta-engineering',concept:'meta'},{term:'garbage collection',concept:'gc'},{term:'progressive disclosure',concept:'progressive'},{term:'Agent Legibility',concept:'legibility'}];
const fdRelations={'codex':['agent','environment'],'agent':['codex','guardrails','gc'],'environment':['codex','legibility','feedback'],'agents-md':['progressive'],'guardrails':['agent','environment'],'feedback':['environment','meta'],'meta':['feedback','agent'],'gc':['agent'],'progressive':['agents-md'],'legibility':['environment']};

function fdToast(m){fdToastEl.textContent=m;fdToastEl.classList.add('visible');clearTimeout(fdToastTimer);fdToastTimer=setTimeout(()=>fdToastEl.classList.remove('visible'),2500);}
function autoMarkKeyTerms(){const containers=document.querySelectorAll('section .prose p, section .prose li, section .callout p, section .bento-card p');containers.forEach(c=>{const sec=c.closest('section[id]');if(!sec)return;fdKeyTerms.forEach(({term,concept})=>{const w=document.createTreeWalker(c,NodeFilter.SHOW_TEXT,null);const batch=[];let n;while(n=w.nextNode()){if(n.textContent.includes(term)&&!n.parentElement.classList.contains('fd-keyterm'))batch.push(n);}batch.forEach(node=>{const t=node.textContent,i=t.indexOf(term);if(i===-1)return;const b=document.createTextNode(t.substring(0,i)),span=document.createElement('span');span.className='fd-keyterm';span.dataset.concept=concept;span.dataset.section=sec.id;span.textContent=term;const a=document.createTextNode(t.substring(i+term.length)),p=node.parentNode;p.insertBefore(b,node);p.insertBefore(span,node);p.insertBefore(a,node);p.removeChild(node);});});});}
function glowRelated(c){const r=fdRelations[c]||[];document.querySelectorAll('.fd-keyterm').forEach(el=>{if(el.dataset.concept===c||r.includes(el.dataset.concept))el.classList.add('related-glow');});}
function clearGlow(){document.querySelectorAll('.fd-keyterm.related-glow').forEach(el=>el.classList.remove('related-glow'));}
document.addEventListener('click',e=>{const kt=e.target.closest('.fd-keyterm');if(kt){e.preventDefault();extractToWS(kt.textContent,kt.dataset.section,kt.dataset.concept,kt);}});
document.addEventListener('mouseover',e=>{const kt=e.target.closest('.fd-keyterm');if(kt)glowRelated(kt.dataset.concept);});
document.addEventListener('mouseout',e=>{const kt=e.target.closest('.fd-keyterm');if(kt)clearGlow();});
document.addEventListener('mouseup',e=>{if(e.target.closest('.fd-toolbar,.fd-workspace'))return;const sel=window.getSelection();if(!sel||sel.isCollapsed||sel.toString().trim().length<3){setTimeout(()=>{if(!fdToolbar.matches(':hover'))fdToolbar.classList.remove('visible');},200);return;}const range=sel.getRangeAt(0),anc=range.commonAncestorContainer.nodeType===1?range.commonAncestorContainer:range.commonAncestorContainer.parentElement;if(!anc||!anc.closest('section[id],.hero'))return;const rect=range.getBoundingClientRect();fdToolbar.style.left=Math.max(8,rect.left+rect.width/2-110)+'px';fdToolbar.style.top=Math.max(8,rect.top-52)+'px';fdToolbar.classList.add('visible');});
document.querySelectorAll('.fd-tool.color').forEach(btn=>{btn.addEventListener('mousedown',e=>e.preventDefault());btn.addEventListener('click',()=>{const color=btn.dataset.color,sel=window.getSelection();if(!sel||sel.isCollapsed)return;const range=sel.getRangeAt(0),sec=(range.commonAncestorContainer.nodeType===1?range.commonAncestorContainer:range.commonAncestorContainer.parentElement)?.closest('section[id]');const hl=document.createElement('span');hl.className=`fd-hl fd-hl-${color}`;hl.dataset.section=sec?sec.id:'hero';try{range.surroundContents(hl);}catch(er){const t=sel.toString();range.deleteContents();hl.textContent=t;range.insertNode(hl);}sel.removeAllRanges();fdToolbar.classList.remove('visible');fdToast('Highlighted â€” click to extract');hl.addEventListener('click',()=>extractToWS(hl.textContent,hl.dataset.section,null,hl));});});
document.getElementById('fd-extract-btn').addEventListener('mousedown',e=>e.preventDefault());
document.getElementById('fd-extract-btn').addEventListener('click',()=>{const sel=window.getSelection();if(!sel||sel.isCollapsed)return;const t=sel.toString().trim(),range=sel.getRangeAt(0),sec=(range.commonAncestorContainer.nodeType===1?range.commonAncestorContainer:range.commonAncestorContainer.parentElement)?.closest('section[id]');extractToWS(t,sec?sec.id:'hero',null,null);sel.removeAllRanges();fdToolbar.classList.remove('visible');});

function extractToWS(text,secId,concept,srcEl){if(fdExcerpts.find(e=>e.text===text&&e.section===secId)){fdToast('Already in workspace');return;}if(srcEl){srcEl.classList.add('extracted','pulse-glow');setTimeout(()=>srcEl.classList.remove('pulse-glow'),700);}const ex={id:Date.now(),text:text.substring(0,200),section:secId,concept,sourceEl:srcEl,cardEl:null};fdExcerpts.push(ex);const card=document.createElement('div');card.className='fd-card';card.innerHTML=`<div class="fd-card-section" style="color:var(--orange)"><span class="fd-card-dot" style="background:#6366f1"></span>${fdNames[secId]||secId}</div><div class="fd-card-text">${text.substring(0,200)}</div><button class="fd-card-remove">&times;</button>`;ex.cardEl=card;
card.addEventListener('click',e=>{if(e.target.classList.contains('fd-card-remove'))return;if(srcEl){srcEl.scrollIntoView({behavior:'smooth',block:'center'});srcEl.classList.add('pulse-glow');setTimeout(()=>srcEl.classList.remove('pulse-glow'),700);drawConn(card,srcEl);}});
card.addEventListener('mouseenter',()=>{if(srcEl)drawConn(card,srcEl);if(concept)glowRelated(concept);});card.addEventListener('mouseleave',()=>{clearConns();clearGlow();});
card.querySelector('.fd-card-remove').addEventListener('click',e=>{e.stopPropagation();fdExcerpts=fdExcerpts.filter(x=>x.id!==ex.id);card.style.transform='translateX(100px)';card.style.opacity='0';setTimeout(()=>card.remove(),300);if(srcEl)srcEl.classList.remove('extracted');updateBadge();});
fdPanelExcerpts.insertBefore(card,fdWsEmpty);updateBadge();fdToast('Extracted to workspace');if(fdExcerpts.length===1)setTimeout(()=>{fdWorkspace.classList.add('open');document.body.classList.add('ws-open');},400);}
function updateBadge(){const n=fdExcerpts.length;fdBadge.textContent=n;fdBadge.classList.toggle('visible',n>0);fdWsEmpty.style.display=n>0?'none':'';}
fdToggle.addEventListener('click',()=>{fdWorkspace.classList.toggle('open');document.body.classList.toggle('ws-open');if(!fdWorkspace.classList.contains('open'))clearConns();});
document.getElementById('fd-ws-close').addEventListener('click',()=>{fdWorkspace.classList.remove('open');document.body.classList.remove('ws-open');clearConns();});
document.querySelectorAll('.fd-ws-tab').forEach(tab=>{tab.addEventListener('click',()=>{document.querySelectorAll('.fd-ws-tab').forEach(t=>t.classList.remove('active'));tab.classList.add('active');const p=tab.dataset.panel;document.querySelectorAll('.fd-ws-panel').forEach(x=>x.classList.remove('active'));document.getElementById('fd-panel-'+p).classList.add('active');document.getElementById('fd-search-bar').classList.toggle('active',p==='search');if(p==='search')fdSearchInput.focus();});});

function drawConn(ce,se){clearConns();const cr=ce.getBoundingClientRect(),sr=se.getBoundingClientRect();if(sr.top>window.innerHeight+150||sr.bottom<-150)return;const x1=cr.left,y1=cr.top+cr.height/2,x2=sr.right,y2=sr.top+sr.height/2,mx=(x1+x2)/2;const p=document.createElementNS('http://www.w3.org/2000/svg','path');p.setAttribute('d',`M ${x1} ${y1} C ${mx} ${y1}, ${mx} ${y2}, ${x2} ${y2}`);p.classList.add('fd-conn');fdSvg.appendChild(p);fdActiveConns.push(p);[{x:x1,y:y1},{x:x2,y:y2}].forEach(pt=>{const d=document.createElementNS('http://www.w3.org/2000/svg','circle');d.setAttribute('cx',pt.x);d.setAttribute('cy',pt.y);d.setAttribute('r',3);d.classList.add('fd-dot');fdSvg.appendChild(d);fdActiveConns.push(d);});requestAnimationFrame(()=>{fdSvg.querySelectorAll('.fd-conn,.fd-dot').forEach(el=>el.classList.add('visible'));});}
function clearConns(){fdActiveConns.forEach(el=>el.remove());fdActiveConns=[];}

// Search
fdSearchInput.addEventListener('input',()=>{clearTimeout(fdSearchDebounce);fdSearchDebounce=setTimeout(runSearch,300);});
fdSearchInput.addEventListener('keydown',e=>{if(e.key==='Enter'&&fdSearchMatches.length>0){fdSearchIdx=(fdSearchIdx+1)%fdSearchMatches.length;jumpMatch(fdSearchIdx);}if(e.key==='Escape'){clearSHL();fdSearchInput.value='';fdSearchMeta.textContent='';}});
function runSearch(){const q=fdSearchInput.value.trim();clearSHL();if(q.length<2){fdSearchMeta.textContent='';fdPanelSearch.innerHTML='';return;}fdSearchMatches=[];fdSearchIdx=-1;const bySec={};document.querySelectorAll('section[id]').forEach(sec=>{const w=sec.querySelector('.section-wrap')||sec;const tn=[];const wk=document.createTreeWalker(w,NodeFilter.SHOW_TEXT,{acceptNode:n=>{const p=n.parentElement;if(!p||p.tagName==='SCRIPT'||p.tagName==='STYLE'||p.closest('.fd-toolbar,.fd-workspace,.fd-toast'))return NodeFilter.FILTER_REJECT;return NodeFilter.FILTER_ACCEPT;}});let nd;while(nd=wk.nextNode())tn.push(nd);tn.forEach(node=>{const t=node.textContent,l=t.toLowerCase(),lq=q.toLowerCase();if(!l.includes(lq))return;const marks=[],frag=document.createDocumentFragment();let rem=t;while(true){const i=rem.toLowerCase().indexOf(lq);if(i===-1)break;if(i>0)frag.appendChild(document.createTextNode(rem.substring(0,i)));const m=document.createElement('mark');m.className='fd-search-match';m.textContent=rem.substring(i,i+q.length);frag.appendChild(m);marks.push(m);rem=rem.substring(i+q.length);}if(rem)frag.appendChild(document.createTextNode(rem));if(marks.length>0){node.parentNode.replaceChild(frag,node);marks.forEach(m=>{m.dataset.section=sec.id;fdSearchMatches.push({el:m,section:sec.id});});bySec[sec.id]=(bySec[sec.id]||0)+marks.length;}});});const tot=fdSearchMatches.length;fdSearchMeta.textContent=tot>0?`${tot} match${tot>1?'es':''}  found`:'No matches';fdPanelSearch.innerHTML='';Object.entries(bySec).forEach(([s,c])=>{const d=document.createElement('div');d.className='fd-card';d.innerHTML=`<div class="fd-card-section" style="color:var(--orange)"><span class="fd-card-dot" style="background:#6366f1"></span>${fdNames[s]||s}</div><div class="fd-card-text">${c} match${c>1?'es':''}</div>`;d.addEventListener('click',()=>{const f=fdSearchMatches.findIndex(m=>m.section===s);if(f>=0)jumpMatch(f);});fdPanelSearch.appendChild(d);});if(tot>0)jumpMatch(0);}
function jumpMatch(i){fdSearchMatches.forEach((m,j)=>m.el.classList.toggle('current',j===i));fdSearchIdx=i;fdSearchMatches[i].el.scrollIntoView({behavior:'smooth',block:'center'});fdSearchMeta.textContent=`${i+1} of ${fdSearchMatches.length}`;}
function clearSHL(){document.querySelectorAll('.fd-search-match').forEach(m=>{const p=m.parentNode;if(p){p.replaceChild(document.createTextNode(m.textContent),m);p.normalize();}});fdSearchMatches=[];fdSearchIdx=-1;}

// Minimap
const mmDots=document.querySelectorAll('.fd-mm-dot');
mmDots.forEach(d=>d.addEventListener('click',()=>{const s=document.getElementById(d.dataset.section);if(s)s.scrollIntoView({behavior:'smooth'});}));
const mmObs=new IntersectionObserver(e=>{e.forEach(en=>{if(en.isIntersecting)mmDots.forEach(d=>d.classList.toggle('active',d.dataset.section===en.target.id));});},{rootMargin:'-35% 0px -60% 0px'});
['hero','experiment','role','environment','knowledge','architecture','culture','future'].forEach(id=>{const s=document.getElementById(id);if(s)mmObs.observe(s);});
const uiObs=new IntersectionObserver(e=>{e.forEach(en=>{const p=!en.isIntersecting;fdMinimap.classList.toggle('visible',p);fdToggle.classList.toggle('visible',p);});},{threshold:0.3});
uiObs.observe(document.getElementById('hero'));

// Keyboard
document.addEventListener('keydown',e=>{if((e.metaKey||e.ctrlKey)&&e.key==='k'){e.preventDefault();fdWorkspace.classList.add('open');document.body.classList.add('ws-open');document.querySelector('.fd-ws-tab[data-panel="search"]').click();}if(e.key==='Escape'&&fdWorkspace.classList.contains('open')){fdWorkspace.classList.remove('open');document.body.classList.remove('ws-open');clearConns();}});
window.addEventListener('scroll',()=>fdToolbar.classList.remove('visible'),{passive:true});
setTimeout(autoMarkKeyTerms,1500);

// Hint
const fdHint=document.getElementById('fd-hint');let fdHintShown=false;
new IntersectionObserver(e=>{if(!fdHintShown&&!e[0].isIntersecting){fdHintShown=true;setTimeout(()=>fdHint.classList.add('visible'),1500);setTimeout(()=>fdHint.classList.remove('visible'),9500);}},{threshold:0.3}).observe(document.getElementById('hero'));
document.getElementById('fd-hint-dismiss').addEventListener('click',()=>fdHint.classList.remove('visible'));
</script>
</body>
</html>
